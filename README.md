# AI Advent - Система ИИ-агентов для создания учебных заданий

Консольное приложение на базе AI-агентов для автоматического создания и проверки учебных заданий для начальной школы (3 класс).

## Описание

Приложение использует два взаимодействующих AI-агента:
- **Agent1 (Составитель заданий)** - генерирует 10 заданий по указанному предмету для 3-го класса
- **Agent2 (Школьный учитель)** - проверяет задания, оценивает их сложность и дает рекомендации по улучшению

## Возможности

- Генерация учебных заданий по любому школьному предмету
- Автоматическая проверка и оценка заданий
- Развернутые комментарии к каждому заданию
- Рекомендации по улучшению заданий
- Асинхронная работа с API на базе корутин
- Интеграция с Z.AI API (модель glm-4.5-flash)

## Требования

- Java 17 или выше
- Kotlin 2.2.20
- Gradle 8.x
- Z.AI API токен

## Установка и настройка

### 1. Получение API токена Z.AI

1. Перейдите на https://z.ai
2. Зарегистрируйтесь или войдите в аккаунт
3. Получите API токен в личном кабинете
4. Скопируйте токен

### 2. Настройка токена

Создайте файл `local.properties` в корне проекта:

```properties
zai.api.token=ваш_токен_здесь
```

**Примечание:**
- Файл `local.properties` не попадет в Git, так как добавлен в `.gitignore`
- При сборке проекта автоматически создается `config.properties` в ресурсах

### 3. Сборка проекта

```bash
./gradlew build
```

## Использование

### Запуск приложения

```bash
./gradlew run
```

### Интерактивный режим

После запуска приложение попросит вас ввести предмет:

```
Введите по которому нужно составить задание для 3-го класса:
```

Введите название предмета (например, "Математика", "Русский язык", "Окружающий мир") и нажмите Enter.

### Процесс работы

1. **Agent1 (Составитель заданий)** генерирует 10 заданий по указанному предмету
2. **Agent2 (Школьный учитель)** проверяет задания и дает развернутую обратную связь

### Пример использования

```
Введите по которому нужно составить задание для 3-го класса: Математика

[Agent1 генерирует задания...]

[Agent2 проверяет и выводит результат:]

Задание 1: Реши пример: 45 + 23
Комментарий: Хорошее задание на сложение двузначных чисел...

Задание 2: Найди периметр прямоугольника со сторонами 5 и 8 см
Комментарий: Отличное задание для понимания концепции периметра...

...
```

## Настройка агентов

Приложение использует двух AI-агентов с предопределенными ролями:

### Agent1 - Составитель заданий
Генерирует 10 учебных заданий по указанному предмету для 3-го класса.

Настройки находятся в `src/main/kotlin/agents/Agent1.kt`

### Agent2 - Школьный учитель
Проверяет задания, оценивает их сложность и дает рекомендации.

Настройки находятся в `src/main/kotlin/agents/Agent2.kt`

### Изменение промптов

Вы можете изменить поведение агентов, отредактировав их системные промпты в соответствующих файлах:

```kotlin
agentPrompt = ChatMessage(
    role = "system",
    content = """
        Ваш кастомный промпт здесь
    """.trimIndent()
)
```

## Структура проекта

```
AIAdvent/
├── src/main/kotlin/
│   ├── Main.kt                  # Основной файл приложения
│   ├── client/
│   │   ├── AiClient.kt          # Интерфейс AI клиента
│   │   └── ZAIClient.kt         # Клиент для работы с Z.AI API
│   ├── agents/
│   │   ├── Agent.kt             # Базовый интерфейс агента
│   │   ├── BaseAgent.kt         # Базовая реализация агента
│   │   ├── Agent1.kt            # Агент-составитель заданий
│   │   └── Agent2.kt            # Агент-учитель
│   └── models/
│       ├── ChatMessage.kt       # Модель сообщения чата
│       ├── ChatRequest.kt       # Модель запроса к API
│       ├── ChatResponse.kt      # Модель ответа от API
│       ├── TaskInput.kt         # Входные данные для агента
│       ├── TaskResult.kt        # Результат работы агента
│       └── ValidationReport.kt  # Отчет валидации
├── src/main/resources/
│   ├── config.properties        # Конфигурация (генерируется автоматически)
│   └── logback.xml             # Настройки логирования
├── build.gradle.kts            # Конфигурация Gradle
├── local.properties            # Локальные настройки (не в Git)
└── README.md                   # Этот файл
```

## Зависимости

### HTTP клиент
- `io.ktor:ktor-client-core:2.3.7` - Ядро Ktor клиента
- `io.ktor:ktor-client-cio:2.3.7` - CIO движок для Ktor
- `io.ktor:ktor-client-content-negotiation:2.3.7` - Content negotiation
- `io.ktor:ktor-serialization-kotlinx-json:2.3.7` - JSON сериализация для Ktor
- `io.ktor:ktor-client-logging:2.3.7` - Логирование запросов

### Другие зависимости
- `kotlinx-serialization-json:1.6.0` - JSON сериализация
- `kotlinx-coroutines-core:1.7.3` - Корутины для асинхронных операций
- `logback-classic:1.4.14` - Система логирования

## Устранение проблем

### Ошибка: "ОШИБКА: API токен не найден!"

Убедитесь, что файл `local.properties` существует и содержит корректный токен:

```properties
zai.api.token=ваш_токен_здесь
```

После этого пересоберите проект:
```bash
./gradlew clean build
```

### Ошибка: HTTP 401 или 403

- Проверьте корректность API токена
- Убедитесь, что токен действителен и не истек
- Проверьте доступ к API Z.AI

### Проблемы с зависимостями

Если возникают проблемы с зависимостями, обновите их:

```bash
./gradlew build --refresh-dependencies
```

### Таймауты

Если запросы к API занимают слишком много времени, можно увеличить таймауты в `ZAIClient.kt`:

```kotlin
install(HttpTimeout) {
    requestTimeoutMillis = 120_000  // Увеличьте при необходимости
    connectTimeoutMillis = 30_000
    socketTimeoutMillis = 60_000
}
```

## Архитектура

Приложение построено на основе:
- **Паттерн Strategy** - разные агенты с разными ролями
- **Dependency Injection** - внедрение AI клиента в агентов
- **Корутины** - асинхронная обработка запросов к API
- **Clean Architecture** - разделение на слои (client, agents, models)

## Лицензия

MIT License

## Авторы

Создано как учебный проект для демонстрации работы AI-агентов в образовательных целях.